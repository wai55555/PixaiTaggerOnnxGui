# PixAI Tagger ONNX GUI

PixAIのパワフルな画像認識モデルを手軽に、あなたのPCで。
このアプリケーションは、ローカル環境にある大量の画像コレクションに対して、高速かつ正確なタグを自動で付与するためのGUIツールです。直感的な操作で、データセットの整理や管理を劇的に効率化します。

| メイン画面 | グリッド編集画面 |
| :---: | :---: |
| ![](https://raw.githubusercontent.com/wiki/wai55555/PixaiTaggerOnnxGui/Sample/main_window_01.png) | ![](https://raw.githubusercontent.com/wiki/wai55555/PixaiTaggerOnnxGui/Sample/main_window_02.png) |
| *(https://raw.githubusercontent.com/wiki/wai55555/PixaiTaggerOnnxGui/Sample/gridview_01.jpg)* | |

## 概要 (Overview)

**PixAI Tagger ONNX GUI** は、[PixAI](https://pixai.art/) が開発した画像タグ付けモデルの[ONNX版](https://huggingface.co/deepghs/pixai-tagger-v0.9-onnx)を利用し、ローカル環境の画像にタグを付与します。

オリジナルのPixAI Taggerは13,000以上の豊富なタグに対応しており、一般的なタグ付けモデル（例：wd-taggerの約10,000タグ）と比較して有利です。このツールはその性能を最大限に引き出し、あなたの画像管理をサポートするために開発されました。

画像の自動タグ付けはもちろん、タグの閲覧、個別編集、そして強力な一括編集機能（特定タグの追加・削除）を備えています。

## 主な機能 (Features)

### 1. 直感的で快適なUI
- **ドラッグ＆ドロップ対応**: 画像フォルダ、単体の画像ファイル、さらにはタグが記載された`.txt`ファイルまで、ウィンドウに直接ドラッグ＆ドロップするだけで即座に読み込めます。
- **軽快な画像ビューア**:
    - リストから画像を選ぶだけの簡単操作。
    - 画像をダブルクリックすれば、自由にリサイズ・移動可能な拡大ウィンドウが表示されます。
    - マウスホイールやキーボード（矢印キー, WASDなど）で、サクサクと次々に画像を切り替えて確認できます。

### 2. パワフルな自動タグ付け
- **高速なONNX Runtime**: CPUでも軽快に動作するONNXモデルを採用。大量の画像もストレスなく処理します。
- **モデル自動ダウンロード**: 初回起動時にボタン一つで、Hugging FaceからPixAI Taggerのモデルとタグファイルを自動でダウンロード。面倒な手作業は不要です。

### 3. 柔軟で高度なタグ編集
- **個別編集**:
    - 画像の既存タグをボタンとして一覧表示。不要なタグはボタンをクリックするだけで削除できます。
    - 新しいタグ（カンマ区切りで複数可）を簡単に追加できます。
- **強力な一括編集**:
    - フォルダ内の全`.txt`ファイルからタグを集計し、出現頻度順に表示。
    - ボタンクリック一つで、**全ファイルから特定のタグを一括で削除**できます。
    - 指定したタグを、**全ファイルの先頭または末尾に一括で追加**することも可能です。
- **グリッド編集ビュー**:
    - `3x3`ボタンからグリッドビューに移行。複数の画像を一度に俯瞰しながら、タグの確認や編集ができます。

### 4. 細やかなカスタマイズ性
- **タグ生成の調整**: `general` と `character` のカテゴリごとに、タグを生成する**しきい値**や**最大タグ数**をスライダーで直感的に調整できます。
- **設定の自動保存**: ウィンドウサイズや各設定値は、アプリ終了時に`config.ini`へ自動保存。次回も同じ環境で作業を再開できます。
- **多言語対応**: 日本語と英語をサポート。OSの言語設定に応じてUIが自動で切り替わります。

## インストールと実行 (Installation & Usage)

1.  リリースページから最新の `PixaiTaggerOnnxGui-vX.X.X.zip` をダウンロードします。
2.  zipファイルを好きな場所に解凍します。
3.  中の `pixai_tagger_gui.exe` を実行します。

## 使い方 (How to Use)

1.  **フォルダの指定**: `参照`ボタンか、画像フォルダのドラッグ＆ドロップで、対象の画像群を読み込みます。
2.  **モデルの準備 (初回のみ)**: `TAG`ボタンの代わりに`ダウンロード開始`と表示されたら、クリックしてモデルをダウンロードします。
3.  **タグ付け実行**: `TAG`ボタンを押すと、フォルダ内の全画像に対してタグ付け処理が始まります。既存の`.txt`ファイルがあれば、上書きを確認するダイアログが表示されます。
4.  **結果の確認と編集**:
    - 左のリストで画像を選ぶと、中央に画像、右にその画像のタグが表示されます。
    - 不要なタグは、右側のタグボタンをクリックして削除します。
    - 下部にある「一括タグ」セクションでは、フォルダ全体にまたがるタグの追加・削除が可能です。

## 実装予定 (To Be Released)

- GPU利用を `config.ini` で切り替えられるようにして高速化
- バッチ処理対応による高速化

## ライセンス (License)

このプロジェクトは **LGPLv3** と **Apache License 2.0** のデュアルライセンスの下で公開されています。

## 謝辞 (Acknowledgements)

- このツールは [PixAI](https://pixai.art/) によってトレーニングされた素晴らしいタグ付けモデルを利用しています。Pixai Taggerが公開されていなければ、このアプリケーションは生まれませんでした。心から感謝申し上げます。
- ONNXモデルは [deepghs](https://huggingface.co/deepghs/pixai-tagger-v0.9-onnx) によってHugging Faceで公開されているものを利用しています。ありがとうございます。
